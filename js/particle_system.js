function Particle(a){this.location=a.copy(),this.velocity=createVector(random(-.5,.5),random(-.5,.5)),this.run=function(){this.update(),this.connect()},this.update=function(){this.location.add(this.velocity),this.location.x<0&&(this.velocity.x*=-1),this.location.x>width&&(this.velocity.x*=-1),this.location.y<0&&(this.velocity.y*=-1),this.location.y>height&&(this.velocity.y*=-1)},this.distance=function(a){return distance=p5.Vector.sub(this.location,a.location),distance.mag()},this.connect=function(){for(beginShape(),j=0;j<particles.length-1;j++)temp=this.distance(particles[j]),temp<minimum&&temp>10&&(vertex(this.location.x,this.location.y,0),vertex(particles[j].location.x,particles[j].location.y,0));endShape()}}function setup(){var a=createCanvas(windowWidth,windowHeight,WEBGL);for(a.parent("bg"),nbparticules=height*width/2e3,nbparticules>500&&(nbparticules=500),i=1;i<nbparticules;i++)particles.push(new Particle(createVector(random(width),random(height))))}function draw(){if(eligible){if(testperf){var a=new Date;r+=1}for(particles[0].location.x=mouseX,particles[0].location.y=mouseY,translate(-width/2,-height/2,0),background(255,255,255,0),i=particles.length-1;i>-1;i--)particles[i].run();if(testperf){var c=(new Date,new Date-a);c>timelimit&&(eligible=!1),c>maxtest&&(maxtest=c),r>50&&(testperf=!1)}}}function windowResized(){resizeCanvas(windowWidth,windowHeight)}var particles=[],minimum=65,testperf=!0,eligible=!0,timelimit=200,maxtest=0,r=0;
